<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Demo Chat</title>
    <style>
.change-name {

}
.me
    { font-weight: bold
    }
    </style>
</head>
<body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@2/dist/socket.io.js"></script>
    <script src="socket.js"></script>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script>

let changingName = false
function Header(props) {
    return React.createElement(
        'div',
        null,
        React.createElement(
            'h1',
            null,
            React.createElement(
                'span',
                null,
                'Your name is ' + (props.changing ? '': userName)
            ),
            changingName ? React.createElement(
                'input',
                {defaultValue: 123, onChange:(e)=>userName = e.target.value}) : null
        ),
        React.createElement(
            'button',
            {onClick: ()=>{
                if(changingName) {
                    socket.emit('new name', {userName:userName})
                }
                changingName = !changingName
                rerender('want to change name')
            }},
            changingName ? 'Ok' : 'Change name'
        )
    )
}
function UserListItem(props) {
    return React.createElement('li', {className: props.me?'me': ''}, props.name)
}
function UserList() {
    let names = []
    for(user in users) {
        names.push(users[user])
    }
    let userElems = names
        .sort((a,b) => a.localeCompare(b))
        .map((name, i) => React.createElement(UserListItem, {key: i, me: name === userName, name: name}))
    return React.createElement(
        'ul',
        null,
        userElems
    )
}
function App() {
    return React.createElement(
        'div',
        null,
        React.createElement(Header),
        React.createElement(UserList)
    )
}

rerender = function (source) {
    console.log('rerender from', source)
    ReactDOM.render(
        React.createElement(App, null),
        document.getElementById('root')
    )
}
    </script>
</body>
</html>